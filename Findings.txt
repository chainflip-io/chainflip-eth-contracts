Receive is not being executed on the deposit  contract. We need to use "function() external payable"
However, when fetching the event gets emitted in the vault  with receive. Why?
Seems like we can't use receive/fallback as wallet transfers won't trigger it.

Also, the fetch native seems to get emitted with a crazy amnount number. Why?
Seems to be an edge case when the value is zero in a call: recipient.call{value: 0}("");
https://nile.tronscan.org/#/transaction/7ad4d54e4fac3515e1e803209e95bcff915e201010fb0dd38bf06473845a95f3
If we move to selfdestruct/fetch deposit channels we can just chekc that when we fetch.
However, the problem becomes for Vault Swaps. How can we solve that?


// *********

Solution with native fetching, `getBlockBalance` and `eth_getLogs`

Deployment tx: https://nile.tronscan.org/#/transaction/80df6bf039ae3031af47fe21ca2d8c7d2180e1baa7f3c71b9615eb8df239e999
Vault address: TTVnpcuAZs6tEUT2TuC7fmadgLgcyM431v // 0x41c042d9449e5340a4a6e48f73622ee0b611e56ea6


Deploy Deposit contract (native): 
tx: https://nile.tronscan.org/#/transaction/3bc02375c701b7ff166b11cd908cd3b5f07fba8ff27e39534a0746d42e898e16
Fetched 0 as there is no balance.
Deposit contract address: THQQYhjsNHUQva3E6YNogX4CWbBmV8qzoB

Deposit TRON tx to Deposit: https://nile.tronscan.org/#/transaction/59175823dd6f9102e2848550db1d6528f85acfab5156240af79666b2ebf7e9e0

Fetch TRX from deposit channels
https://nile.tronscan.org/#/transaction/8c287bb9ce166eeee96a04ad85fa5800f71fc53dd2ebc7aac8861bd49b5e49a2


Example transfer from vault to deposit contract:
https://nile.tronscan.org/#/transaction/010ff6fe22ec2976f1a6c9fb1df437c07b64c49d0f09b7bdc66dcd3cbf81aa26



Interesting tx around energy delegation: https://tronscan.org/#/transaction/45133bb897e64e28692a4700fe8abb148e1239eaad10f2ef4b67ba0626ec0c4b

Deployed Vault contract with 90% energy sponsored by deployer - TTmmRfpKqsypGRQbMUcrJu9MMhudRh8FCk // 41c34856cadd5524892907d8a34126053447740375

Vault swap with some energy consumed by the deployer.
https://nile.tronscan.org/#/transaction/674c5c209c01b5a05d5defa779e84f7edb11fe1665720fc2f0141e721d7a9b04

We can use thecontract's ennergy limit to limit the amount of energy that can be consumed per transaction from the deployer's account. However,
the max will be some batch fetch of multiple fetches, which is much greater than a grief/spam Vault swaps.


// Deployments bypassing signature verification (run verification logic to spend energy but return true)

Deployed KeyManager:  TSxVVVqduUFTbSmpnrGMnBfHGu8mrUxLgZ // 41ba577ce024cf2053888bb221784a88e9c7838f97
Deployed Vault: TMiYQL4FPjEYQ9KyqM37T1QmAnKzJTntic // 4180db771d9ef9eadaf2fae55904aa3bf6d857f7a4

Deploy deposit channel contract (deploy deposit at TYQn89aNzAkwcCmTyKB3XPQJvbCn82Ew2y)
    https://nile.tronscan.org/#/transaction/ddfc3f9033f3880cda5a81bcd1d54d5da8b233c000e7d36b9e33f3cacd7379dd
    636 bandwith（0.636 TRX burned for Bandwidth)
    248,638 Energy
    
Fetch TRX:
    https://nile.tronscan.org/#/transaction/9603ee4db52e32b83c04468febfebfee61292dd8d3d962b45e78e1a7deb68475
    636 Bandwidth（0.636 TRX burned for Bandwidth）
    43,442 Energy（Energy usage from user's staked energy

Fetch USDT:
    https://nile.tronscan.org/#/transaction/a129badc3b76cae3b19d64bc6fd88a303b8f62e2c69ec42da8f65d63f86fe38b
    636 Bandwidth (0.636 TRX burned for Bandwidth）
    52,751 Energy（Energy usage from user's staked energy)

Transfer TRX to-non existing account
    https://nile.tronscan.org/#/transaction/d18967fc9935b1afeca18dcb11eb842f0728fc88d67b2952d616bebbed4c2dee
    668 Bandwidth (0.668 TRX burned for Bandwidth）
    67,891 Energy (Energy usage from user's staked energy）

Transfer TRX to existing account
    https://nile.tronscan.org/#/transaction/83f21e0822ae60d77eaebf1d2ad92c99ee2d370ac470d7108425076d4a3e657f
    668 Bandwidth (0.668 TRX burned for Bandwidth）
    42,891 Energy (Energy usage from user's staked energy）

Transfer USDT to non-existing account
    https://nile.tronscan.org/#/transaction/94792e8c72817f79c894636c64874e33edd9ca11f0d91fe1b91d432b14d2c933
    668 Bandwidth（0.668 TRX burned for Bandwidth）
    69,540 Energy（Energy usage from user's staked energy）

Transfer USDT to existing account
    https://nile.tronscan.org/#/transaction/dcc614d5ef6de42247f4a1aff1a7f97d9d87dae138074314c78ac51dd2edb981
    668 Bandwidth（0.668 TRX burned for Bandwidth）   
    54,540 Energy（Energy usage from user's staked energy）



// Mainnet USDT have a 340% extra fee on the USDT token. We need to add that to the numbers above!
// In testnet a USDT transfer is 14600 energy. In mainnet is 64,285. So basically 14600 * (1 + 3.4) = 64240.
// To estimate how much that will differ/add. A decent estimation is probably to add 14600 * 3.4 = 49640 on top of all USDT.


// Vault contract deployed with 100% energy paid by deployer
Vault address: TZEQtGkPWPFLSXQyEiQCJZQnzRpxCVb5zT //41ff2b0d478cf00b35ee7c7c0bf1ec54102d529686

