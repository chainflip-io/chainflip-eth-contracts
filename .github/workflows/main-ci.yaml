name: master Pipeline
on: 
  push:
    branches-ignore: ci/run-tests-natively-on-machine

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  build:
    name: Build Docker Image
    uses: chainflip-io/chainflip-eth-contracts/.github/workflows/.docker-build.yaml@master

  lint:
    name: Linting
    needs: build
    uses: chainflip-io/chainflip-eth-contracts/.github/workflows/.lint.yaml@master

  run-tests:
    name: Stateless Tests
    needs: build
    uses: chainflip-io/chainflip-eth-contracts/.github/workflows/.test.yaml@master
    with:
      stateful: false
      runs_on: ubuntu-latest
